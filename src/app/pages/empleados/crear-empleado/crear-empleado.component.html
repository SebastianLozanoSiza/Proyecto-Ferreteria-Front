<div class="ferreteria-modal-container">
    <div class="modal-header">
        <h2 class="modal-title">
            <i class="fas fa-user-edit user-icon" aria-hidden="true"></i>
            <span>Crear Empleado</span>
        </h2>
        <button type="button" class="close-button" (click)="cerrar()" aria-label="Cerrar">
            <i class="fas fa-times"></i>
        </button>
    </div>

    <form class="user-form" [formGroup]="formCrearEmpleado">
        <!-- Identificación -->
        <div class="form-group">
            <label for="identificacion">
                <i class="fas fa-id-card" aria-hidden="true"></i>
                Identificación
            </label>
            <input type="text" class="form-control" id="identificacion" formControlName="identificacion"
                placeholder="Ej: 1234567890"
                [ngClass]="{'is-invalid': formCrearEmpleado.get('identificacion')?.invalid && formCrearEmpleado.get('identificacion')?.touched}">
            <div class="invalid-feedback"
                *ngIf="formCrearEmpleado.get('identificacion')?.invalid && formCrearEmpleado.get('identificacion')?.touched">
                Por favor ingrese un número de identificación válido.
            </div>
        </div>

        <!-- Nombre y Apellidos -->
        <div class="form-row">
            <div class="form-group col-md-6">
                <label for="nombre">
                    <i class="fas fa-signature" aria-hidden="true"></i>
                    Nombre
                </label>
                <input type="text" class="form-control" id="nombre" formControlName="nombre" placeholder="Ej: Juan"
                    [ngClass]="{'is-invalid': formCrearEmpleado.get('nombre')?.invalid && formCrearEmpleado.get('nombre')?.touched}">
                <div class="invalid-feedback"
                    *ngIf="formCrearEmpleado.get('nombre')?.invalid && formCrearEmpleado.get('nombre')?.touched">
                    Por favor ingrese su nombre.
                </div>
            </div>
            <div class="form-group col-md-6">
                <label for="apellidos">
                    <i class="fas fa-signature" aria-hidden="true"></i>
                    Apellidos
                </label>
                <input type="text" class="form-control" id="apellidos" formControlName="apellidos"
                    placeholder="Ej: Pérez González"
                    [ngClass]="{'is-invalid': formCrearEmpleado.get('apellidos')?.invalid && formCrearEmpleado.get('apellidos')?.touched}">
                <div class="invalid-feedback"
                    *ngIf="formCrearEmpleado.get('apellidos')?.invalid && formCrearEmpleado.get('apellidos')?.touched">
                    Por favor ingrese sus apellidos.
                </div>
            </div>
        </div>

        <!-- Correo -->
        <div class="form-group">
            <label for="correo">
                <i class="fas fa-envelope" aria-hidden="true"></i>
                Correo Electrónico
            </label>
            <input type="email" class="form-control" id="correo" formControlName="correo"
                placeholder="Ej: usuario@ejemplo.com"
                [ngClass]="{'is-invalid': formCrearEmpleado.get('correo')?.invalid && formCrearEmpleado.get('correo')?.touched}">
            <div class="invalid-feedback"
                *ngIf="formCrearEmpleado.get('correo')?.errors?.['required'] && formCrearEmpleado.get('correo')?.touched">
                El correo electrónico es obligatorio.
            </div>
            <div class="invalid-feedback"
                *ngIf="formCrearEmpleado.get('correo')?.errors?.['email'] && formCrearEmpleado.get('correo')?.touched">
                Por favor ingrese un correo electrónico válido.
            </div>
        </div>

        <!-- Dirección -->
        <div class="form-group">
            <label for="direccion">
                <i class="fas fa-map-marker-alt" aria-hidden="true"></i>
                Dirección
            </label>
            <input type="text" class="form-control" id="direccion" formControlName="direccion"
                placeholder="Ej: Calle 123 #45-67, Ciudad"
                [ngClass]="{'is-invalid': formCrearEmpleado.get('direccion')?.invalid && formCrearEmpleado.get('direccion')?.touched}">
            <div class="invalid-feedback"
                *ngIf="formCrearEmpleado.get('direccion')?.invalid && formCrearEmpleado.get('direccion')?.touched">
                Por favor ingrese una dirección válida.
            </div>
        </div>

        <!-- Teléfono -->
        <div class="form-group">
            <label for="telefono">
                <i class="fas fa-phone" aria-hidden="true"></i>
                Teléfono
            </label>
            <input type="tel" class="form-control" id="telefono" formControlName="telefono" placeholder="Ej: 3001234567"
                [ngClass]="{'is-invalid': formCrearEmpleado.get('telefono')?.invalid && formCrearEmpleado.get('telefono')?.touched}">
            <div class="invalid-feedback"
                *ngIf="formCrearEmpleado.get('telefono')?.invalid && formCrearEmpleado.get('telefono')?.touched">
                Por favor ingrese un número de teléfono válido.
            </div>
        </div>

        <!-- Rol -->
        <div class="form-group">
            <label for="idRol">
                <i class="fas fa-user-tag" aria-hidden="true"></i>
                Rol
            </label>
            <select class="form-control" style="padding: 0;" id="idRol" formControlName="idRol"
                [ngClass]="{'is-invalid': formCrearEmpleado.get('idRol')?.invalid && formCrearEmpleado.get('idRol')?.touched}">
                <option value="" disabled selected>Seleccione un rol</option>
                <option *ngFor="let rol of listaRoles" [value]="rol.idRol">
                    {{ rol.nombreRol }}
                </option>
            </select>
            <div class="invalid-feedback"
                *ngIf="formCrearEmpleado.get('idRol')?.invalid && formCrearEmpleado.get('idRol')?.touched">
                Por favor seleccione un rol.
            </div>
        </div>

        <!-- Ferretería -->
        <div class="form-group">
            <label for="idFerreteria">
                <i class="fas fa-store" aria-hidden="true"></i>
                Ferretería
            </label>
            <select class="form-control" id="idFerreteria" style="padding: 0;" formControlName="idFerreteria"
                [ngClass]="{'is-invalid': formCrearEmpleado.get('idFerreteria')?.invalid && formCrearEmpleado.get('idFerreteria')?.touched}">
                <option value="" disabled selected>Seleccione una ferretería</option>
                <option *ngFor="let ferreteria of listaFerreteria" [value]="ferreteria.idFerreteria">
                    {{ ferreteria.razonSocial }}
                </option>
            </select>
            <div class="invalid-feedback"
                *ngIf="formCrearEmpleado.get('idFerreteria')?.invalid && formCrearEmpleado.get('idFerreteria')?.touched">
                Por favor seleccione una ferretería.
            </div>
        </div>

        <!-- Acciones -->
        <div class="modal-actions">
            <div class="action-message" *ngIf="guardando">
                <i class="fas fa-circle-notch fa-spin"></i> Guardando...
            </div>
            <div class="buttons-container" *ngIf="!guardando">
                <button type="button" class="btn btn-secondary" (click)="cerrar()">
                    <i class="fas fa-times-circle" aria-hidden="true"></i>
                    Cancelar
                </button>
                <button type="submit" class="btn btn-primary" [disabled]="formCrearEmpleado.invalid" (click)="crearEmpleado()">
                    <i class="fas fa-save" aria-hidden="true"></i>
                    Guardar Cambios
                </button>
            </div>
        </div>
    </form>
</div>